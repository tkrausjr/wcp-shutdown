Script started on 2024-04-04 11:53:38-04:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="177" LINES="51"]
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ python -m pip install pysimplegui[10Pssh root@192.168.200.16[2Pk config get-contextsssh root@192.168.100.16[2Pk config get-contextsssh root@192.168.200.16python -m pip install pysimplegui[Kpython -m pip install pysimplegui[10Pssh root@192.168.200.16[2Pk config get-contextsssh root@192.168.100.16[2Pk config get-contextscp ako-helmrelease.yaml source-helmrepo-ako.yaml ~/github/gitops-fluxcd/[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cls[Kcd ako[4Pls[K[Kpython3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01
Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
-ERROR-Could NOT find cluster with name ,  tanzu-01
-Double check the Cluster Name. Exiting the program
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ python3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01
Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
Traceback (most recent call last):
  File "wcp-shutdown.py", line 266, in <module>
    main()
  File "wcp-shutdown.py", line 181, in main
    print('-Found the vSphere Cluster named',args.cluster,'with ID',cluster_id )
UnboundLocalError: local variable 'cluster_id' referenced before assignment
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ python3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01

Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
-Found the vSphere Cluster named tanzu-01 with ID domain-c4180
-ERROR-Could NOT find cluster with name ,  tanzu-01
-Double check the Cluster Name. Exiting the program
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ python3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01
Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
-Found the vSphere Cluster named tanzu-01 with ID domain-c4180
-ERROR-Could NOT find cluster with name ,  tanzu-01
-Double check the Cluster Name. Exiting the program
-Found the vSphere Cluster named tanzu-01 with ID domain-c4102
-Found the vSphere Cluster named tanzu-01 with ID domain-c4102
-Found the vSphere Cluster named tanzu-01 with ID domain-s2512
-ERROR-Could NOT find cluster with name ,  tanzu-01
-Double check the Cluster Name. Exiting the program

STEP 1 - Getting all Workload Cluster VMs from K8s API Server on Supervisor Cluster
-WCP Endpoint for SC is  0
-Could not login to WCP SC Endpoint.  Is WCP Service running ? 
Traceback (most recent call last):
  File "wcp-shutdown.py", line 266, in <module>
    main()
  File "wcp-shutdown.py", line 202, in main
    client2=client.CustomObjectsApi(api_client=config.new_client_from_config(context=wcp_endpoint))
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 864, in new_client_from_config
    load_kube_config(config_file=config_file, context=context,
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 808, in load_kube_config
    loader = _get_kube_config_loader(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 770, in _get_kube_config_loader
    return KubeConfigLoader(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 206, in __init__
    self.set_active_context(active_context)
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 259, in set_active_context
    self._current_context = self._config['contexts'].get_with_name(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 657, in get_with_name
    raise ConfigException(
kubernetes.config.config_exception.ConfigException: Invalid kube-config file. Expected object with name 0 in /home/tkrausjr/.kube/config/contexts list
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ python3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01
Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
-Found the vSphere Cluster named tanzu-01 with ID domain-c4102

STEP 1 - Getting all Workload Cluster VMs from K8s API Server on Supervisor Cluster
-WCP Endpoint for SC is  0
-Could not login to WCP SC Endpoint.  Is WCP Service running ? 
Traceback (most recent call last):
  File "wcp-shutdown.py", line 262, in <module>
    main()
  File "wcp-shutdown.py", line 198, in main
    client2=client.CustomObjectsApi(api_client=config.new_client_from_config(context=wcp_endpoint))
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 864, in new_client_from_config
    load_kube_config(config_file=config_file, context=context,
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 808, in load_kube_config
    loader = _get_kube_config_loader(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 770, in _get_kube_config_loader
    return KubeConfigLoader(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 206, in __init__
    self.set_active_context(active_context)
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 259, in set_active_context
    self._current_context = self._config['contexts'].get_with_name(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 657, in get_with_name
    raise ConfigException(
kubernetes.config.config_exception.ConfigException: Invalid kube-config file. Expected object with name 0 in /home/tkrausjr/.kube/config/contexts list
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ python3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01
Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
-Found the vSphere Cluster named tanzu-01 with ID domain-c4102

STEP 1 - Getting all Workload Cluster VMs from K8s API Server on Supervisor Cluster
-WCP Endpoint for SC is  0
-Could not login to WCP SC Endpoint.  Is WCP Service running ? 
Traceback (most recent call last):
  File "wcp-shutdown.py", line 263, in <module>
    main()
  File "wcp-shutdown.py", line 199, in main
    client2=client.CustomObjectsApi(api_client=config.new_client_from_config(context=wcp_endpoint))
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 864, in new_client_from_config
    load_kube_config(config_file=config_file, context=context,
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 808, in load_kube_config
    loader = _get_kube_config_loader(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 770, in _get_kube_config_loader
    return KubeConfigLoader(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 206, in __init__
    self.set_active_context(active_context)
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 259, in set_active_context
    self._current_context = self._config['contexts'].get_with_name(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 657, in get_with_name
    raise ConfigException(
kubernetes.config.config_exception.ConfigException: Invalid kube-config file. Expected object with name 0 in /home/tkrausjr/.kube/config/contexts list
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ kubectl vsphere login --[K[K[K[Kpython3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01
Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
-Found the vSphere Cluster named tanzu-01 with ID domain-c4102

STEP 1 - Getting all Workload Cluster VMs from K8s API Server on Supervisor Cluster
-ERROR-Could not connect to WCP API. Error: {"messages":[{"args":["domain-s2512"],"default_message":"The ClusterComputeResource with identifier domain-s2512 does not exist.","localized":"The ClusterComputeResource with identifier domain-s2512 does not exist.","id":"vcenter.wcp.vc.cluster.notfound"}]}
-WCP Endpoint for SC is  0
-Could not login to WCP SC Endpoint.  Is WCP Service running ? 
Traceback (most recent call last):
  File "wcp-shutdown.py", line 264, in <module>
    main()
  File "wcp-shutdown.py", line 200, in main
    client2=client.CustomObjectsApi(api_client=config.new_client_from_config(context=wcp_endpoint))
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 864, in new_client_from_config
    load_kube_config(config_file=config_file, context=context,
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 808, in load_kube_config
    loader = _get_kube_config_loader(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 770, in _get_kube_config_loader
    return KubeConfigLoader(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 206, in __init__
    self.set_active_context(active_context)
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 259, in set_active_context
    self._current_context = self._config['contexts'].get_with_name(
  File "/home/tkrausjr/.local/lib/python3.8/site-packages/kubernetes/config/kube_config.py", line 657, in get_with_name
    raise ConfigException(
kubernetes.config.config_exception.ConfigException: Invalid kube-config file. Expected object with name 0 in /home/tkrausjr/.kube/config/contexts list
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ python3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01
Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
-Found the vSphere Cluster named tanzu-01 with ID domain-c4102

STEP 1 - Getting all Workload Cluster VMs from K8s API Server on Supervisor Cluster
-WCP Cluster Status is: RUNNING
-WCP Endpoint for SC is  192.168.201.111


KUBECTL_VSPHERE_PASSWORD environment variable is not set. Please enter the password below
Password: 
Logged in successfully.

You have access to the following contexts:
   10.96.230.172
   192.168.201.111
   k8s-02
   sort
   tanzu-dev02

If the context you wish to use is not in this list, you may need to try
logging in again later, or contact your cluster administrator.

To change context, use `kubectl config use-context <workload name>`

-Found 4 kubernetes Workload Cluster VMs
-Found CAPI Machine Object in SC. VM Name = k8s-02-md-0-9bkb9-76b776948-2l794
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-md-0-9bkb9-76b776948-2l794. 
-Found CAPI Machine Object in SC. VM Name = k8s-02-md-0-9bkb9-76b776948-44wks
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-md-0-9bkb9-76b776948-44wks. 
-Found CAPI Machine Object in SC. VM Name = k8s-02-md-0-9bkb9-76b776948-6qlkw
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-md-0-9bkb9-76b776948-6qlkw. 
-Found CAPI Machine Object in SC. VM Name = k8s-02-xwnr7-n7d8d
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-xwnr7-n7d8d. 

STEP 2 - Stopping WCP Service on vCenter
-Press Enter to confirm/continue...^CTraceback (most recent call last):
  File "wcp-shutdown.py", line 264, in <module>
    main()
  File "wcp-shutdown.py", line 227, in main
    input("-Press Enter to confirm/continue...")
KeyboardInterrupt

]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ python3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01
Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
-Found the vSphere Cluster named tanzu-01 with ID domain-c4102

STEP 1 - Getting all Workload Cluster VMs from K8s API Server on Supervisor Cluster
-ERROR-Getting WCP Cluster Status is: CONFIGURING
-ERROR-Aborting because WCP Cluster is NOT Healthy
-WCP Endpoint for SC is  192.168.201.111
-Could not login to WCP SC Endpoint.  Is WCP Service running ? 

-Found 4 kubernetes Workload Cluster VMs
-Found CAPI Machine Object in SC. VM Name = k8s-02-md-0-9bkb9-76b776948-2l794
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-md-0-9bkb9-76b776948-2l794. 
-Found CAPI Machine Object in SC. VM Name = k8s-02-md-0-9bkb9-76b776948-44wks
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-md-0-9bkb9-76b776948-44wks. 
-Found CAPI Machine Object in SC. VM Name = k8s-02-md-0-9bkb9-76b776948-6qlkw
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-md-0-9bkb9-76b776948-6qlkw. 
-Found CAPI Machine Object in SC. VM Name = k8s-02-xwnr7-n7d8d
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-xwnr7-n7d8d. 

STEP 2 - Stopping WCP Service on vCenter
-Press Enter to confirm/continue...^CTraceback (most recent call last):
  File "wcp-shutdown.py", line 264, in <module>
    main()
  File "wcp-shutdown.py", line 227, in main
    input("-Press Enter to confirm/continue...")
KeyboardInterrupt

]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ k ver[K[Ksphere login
Error: required flag(s) "server" not set
Usage:
  kubectl-vsphere login [flags]

Examples:
kubectl vsphere login --vsphere-username user@domain --server=https://10.0.1.10

Flags:
  -h, --help                                        help for login
      --insecure-skip-tls-verify                    Skip certificate verification (this is insecure).
      --server string                               Address of the server to authenticate against.
      --tanzu-kubernetes-cluster-name string        Name of the Tanzu Kubernetes cluster to login to.
      --tanzu-kubernetes-cluster-namespace string   Namespace in which the Tanzu Kubernetes cluster resides.
  -u, --vsphere-username string                     Username to authenticate.

Global Flags:
      --request-timeout string   Request timeout for HTTP client.
  -v, --verbose int              Print verbose logging information.

]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ k vsphere login --[K[K--insecure-skip-tls-verify -u administrator@vsphere.local --server 102.1[K[K[K[K92[K[K[K192.168.201.111


KUBECTL_VSPHERE_PASSWORD environment variable is not set. Please enter the password below
Password: 
Logged in successfully.

You have access to the following contexts:
   10.96.230.172
   192.168.201.111
   k8s-02
   sort
   tanzu-dev02

If the context you wish to use is not in this list, you may need to try
logging in again later, or contact your cluster administrator.

To change context, use `kubectl config use-context <workload name>`
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ k vsphere login --insecure-skip-tls-verify -u administrator@vsphere.local --server 192.168.201.111


KUBECTL_VSPHERE_PASSWORD environment variable is not set. Please enter the password below
Password: 
]0;tkrausjr@ubu02-jumphost: ~/github/wcp-shutdown[01;32mtkrausjr@ubu02-jumphost[00m:[01;34m~/github/wcp-shutdown[00m$ k vsphere login --insecure-skip-tls-verify -u administrator@vsphere.local --server 192.168.201.111[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Kpython3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C -m pip install pysimplegui[K3 wcp-shutdown.py -v 192.168.200.16 -u administrator@vsphere.local -p VMware1! -c tanzu-01
Enter root password for ESXi hosts: 

STEP 0 - Logging into vCenter API with supplied credentials 
--Successfully logged in to VIM API
-Found a total of 21 VMS on VC. 
-Found the vSphere Cluster named tanzu-01 with ID domain-c4102

STEP 1 - Getting all Workload Cluster VMs from K8s API Server on Supervisor Cluster
-WCP Cluster Status is: RUNNING
-WCP Endpoint for SC is  192.168.201.111


KUBECTL_VSPHERE_PASSWORD environment variable is not set. Please enter the password below
Password: 
Logged in successfully.

You have access to the following contexts:
   10.96.230.172
   192.168.201.111
   k8s-02
   sort
   tanzu-dev02

If the context you wish to use is not in this list, you may need to try
logging in again later, or contact your cluster administrator.

To change context, use `kubectl config use-context <workload name>`

-Found 4 kubernetes Workload Cluster VMs
-Found CAPI Machine Object in SC. VM Name = k8s-02-md-0-9bkb9-76b776948-2l794
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-md-0-9bkb9-76b776948-2l794. 
-Found CAPI Machine Object in SC. VM Name = k8s-02-md-0-9bkb9-76b776948-44wks
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-md-0-9bkb9-76b776948-44wks. 
-Found CAPI Machine Object in SC. VM Name = k8s-02-md-0-9bkb9-76b776948-6qlkw
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-md-0-9bkb9-76b776948-6qlkw. 
-Found CAPI Machine Object in SC. VM Name = k8s-02-xwnr7-n7d8d
-Found VM matching CAPI Machine Name in VC API. VM=k8s-02-xwnr7-n7d8d. 

STEP 2 - Stopping WCP Service on vCenter
-Press Enter to confirm/continue...
--Successfully set WCP Service Startup to MANUAL. Response Code 204 
--Successfully stopped WCP Service. Response Code 204 

STEP 3 - Shutting Down all Supervisor Control Plane VMs 
-Found Supervisor Control Plane VM SupervisorControlPlaneVM (1). 
-VM SupervisorControlPlaneVM (1)  is running on ESX host 192.168.200.24
-ESX host 192.168.200.24  has Management IP 19